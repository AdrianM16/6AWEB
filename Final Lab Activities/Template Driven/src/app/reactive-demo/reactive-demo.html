<div class="page">
  <div class="card">
    <header class="head">
      <h1 class="title">Angular Reactive Form</h1>
      <p class="sub">Reactive form with validators, error messages, and submit feedback.</p>
    </header>

    <form class="form" [formGroup]="form" (ngSubmit)="onSubmit()">

      <!-- Username -->
      <div class="field">
        <label class="label" for="username">Username</label>
        <input id="username" class="input" type="text" placeholder="Enter username" formControlName="username"
               [class.is-invalid]="isInvalid('username')" />
        <p class="hint">3–12 chars. Letters/numbers/_ only.</p>
        <p class="error" *ngIf="isInvalid('username')">{{ getError('username') }}</p>
      </div>

      <!-- Email -->
      <div class="field">
        <label class="label" for="email">Email</label>
        <input id="email" class="input" type="email" placeholder="Enter email" formControlName="email"
               [class.is-invalid]="isInvalid('email')" />
        <p class="error" *ngIf="isInvalid('email')">{{ getError('email') }}</p>
      </div>

      <!-- Password -->
      <div class="field">
        <label class="label" for="password">Password</label>
        <input id="password" class="input" type="password" placeholder="Enter password" formControlName="password"
               [class.is-invalid]="isInvalid('password')" />
        <p class="hint">Minimum of 6 characters.</p>
        <p class="error" *ngIf="isInvalid('password')">{{ getError('password') }}</p>
      </div>

      <!-- Role -->
      <div class="field">
        <label class="label" for="role">Role</label>
        <select id="role" class="input" formControlName="role" [class.is-invalid]="isInvalid('role')">
          <option value="" disabled>Select role</option>
          <option *ngFor="let r of roles" [value]="r">{{ r }}</option>
        </select>
        <p class="error" *ngIf="isInvalid('role')">{{ getError('role') }}</p>
      </div>

      <!-- Gender (Radio Buttons) -->
      <div class="field">
        <label class="label">Gender</label>
        <div class="radio-group" [class.is-invalid-box]="isInvalid('gender')">
          <label class="radio-card">
            <input type="radio" value="Male" formControlName="gender" />
            <span>Male</span>
          </label>

          <label class="radio-card">
            <input type="radio" value="Female" formControlName="gender" />
            <span>Female</span>
          </label>
        </div>
        <p class="error" *ngIf="isInvalid('gender')">{{ getError('gender') }}</p>
      </div>

      <!-- Status (Permanent / Probationary) -->
      <div class="field">
        <label class="label">Status</label>
        <div class="radio-group" [class.is-invalid-box]="isInvalid('status')">
          <label class="radio-card">
            <input type="radio" value="Permanent" formControlName="status" />
            <span>Permanent</span>
          </label>

          <label class="radio-card">
            <input type="radio" value="Probationary" formControlName="status" />
            <span>Probationary</span>
          </label>
        </div>
        <p class="error" *ngIf="isInvalid('status')">{{ getError('status') }}</p>
      </div>

      <!-- Comments (Notes) -->
      <div class="field">
        <label class="label" for="comments">Comments</label>
        <textarea id="comments" class="textarea" rows="3" placeholder="Write notes here..."
                  formControlName="comments"></textarea>
      </div>

      <!-- Submit -->
      <button class="btn" type="submit" [disabled]="form.invalid">
        Submit
      </button>

      <p class="footnote">Tip: Submit button enables when all required fields are valid.</p>

      <div class="success" *ngIf="submitted">
        ✅ Submitted successfully!
      </div>

      <div class="summary" *ngIf="submittedData">
        <p class="summary-title">Submitted Data</p>
        <ul class="summary-list">
          <li><span>Username:</span> {{ submittedData.username }}</li>
          <li><span>Email:</span> {{ submittedData.email }}</li>
          <li><span>Role:</span> {{ submittedData.role }}</li>
          <li><span>Gender:</span> {{ submittedData.gender }}</li>
          <li><span>Status:</span> {{ submittedData.status }}</li>
          <li><span>Comments:</span> {{ submittedData.comments || '—' }}</li>
        </ul>
      </div>

    </form>
  </div>
</div>
